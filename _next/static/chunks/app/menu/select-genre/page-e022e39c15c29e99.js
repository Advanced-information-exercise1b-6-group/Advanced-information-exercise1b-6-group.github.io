(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{2446:function(e,t,n){Promise.resolve().then(n.bind(n,8426))},9645:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(7437),a=n(6463),u=n(2265);let i=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"戻る",onClick:e=>e.back()}],o=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"MyPage",onClick:e=>e.push("/mypage")}];function s(e){var t;let n=null!==(t=e.buttons)&&void 0!==t?t:e.isHome?o:i;return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,r.jsx)("main",{className:"flex flex-grow flex-shrink flex-col p-10 pt-14 overflow-y-scroll",children:(0,r.jsx)(u.Suspense,{children:e.children})}),0!=n.length&&(0,r.jsx)(l,{buttons:n,className:"flex-shrink-0"})]})}function l(e){let{className:t,buttons:n}=e,u=(0,a.useRouter)();return(0,r.jsx)("footer",{className:"w-full h-[20vw] bg-amber-600 flex flex-row ".concat(t),children:n.map(e=>{let{label:t,onClick:n}=e;return(0,r.jsx)("button",{className:"w-1 flex-grow h-full border-black border-2 border-l-0 first:border-l-2",onClick:()=>n(u),children:t},t)})})}},8426:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(7437),a=n(2265),u=n(6463),i=n(9645),o=n(2472),s=n(7549),l=n(9825),c=n(2879),f=n(3770),h=n(4887),d=n(8260);function m(){return(0,r.jsx)(i.P,{children:(0,r.jsx)(g,{})})}function g(){let e=(0,u.useRouter)(),t=(0,f.v$)(),[n,i]=(0,a.useState)("bento"),[m,g]=(0,a.useState)(!1),b=(0,a.useCallback)(async()=>{let r;(0,h.flushSync)(()=>g(!0)),await (0,d.v)();try{r=(await (0,l.y)(n,t))[Math.floor(10*Math.random())]}finally{g(!1)}if(null==r){alert("適切な組み合わせが見つかりませんでした");return}(0,o.J)((0,s.i5)(),"breakfast",[{...r.breakfast,ate:!1}],0),(0,o.J)((0,s.i5)(),"lunch",[{...r.lunch,ate:!1}],0),(0,o.J)((0,s.i5)(),"dinner",[{...r.dinner,ate:!1}],0),e.push("/menu/show")},[n,t,e]);return m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-xl",children:"メニュー検索"}),(0,r.jsx)("hr",{className:"border-amber-700"}),(0,r.jsx)("p",{children:"検索中..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-xl",children:"メニュー検索"}),(0,r.jsx)("hr",{className:"border-amber-700"}),(0,r.jsx)("p",{children:"今日食べたいジャンルを選択してください"}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("select",{value:n,onChange:e=>i(e.target.value),className:"border-2 border-black w-60",children:Object.entries(c.HY).map(e=>{let[t,n]=e;return(0,r.jsx)("option",{value:t,children:n},t)})})}),(0,r.jsx)("div",{className:"text-right mt-10",children:(0,r.jsx)("button",{disabled:!n,onClick:b,className:"border-2 border-black w-40",children:"商品を探す"})})]})}},7858:function(e,t,n){"use strict";function r(e){return JSON.parse(localStorage.getItem("eatenData")||"[]").filter(t=>t.date===e)}n.d(t,{u:function(){return r}})},2472:function(e,t,n){"use strict";function r(e,t,n,r){let a=JSON.parse(localStorage.getItem("eatenData")||"[]"),u=a.findIndex(n=>n.date===e&&n.mealKind===t);-1!==u&&a.splice(u,1),a.push({date:e,mealKind:t,additionalEnergy:r,menu:n});let i=JSON.stringify(a);return localStorage.setItem("eatenData",i),!0}n.d(t,{J:function(){return r}})},3770:function(e,t,n){"use strict";n.d(t,{Hb:function(){return c},uN:function(){return l},v$:function(){return f}});var r=n(2265),a=n(7200),u=n(6463);n(5592);var i=n(7858),o=n(7549);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,a]=(0,r.useState)();if(void 0!==n&&t.length==n.dependencies.length&&t.every((e,t)=>Object.is(e,n.dependencies[t])))return n.value;let u=e();return a({value:u,dependencies:t}),u}function l(){return c((0,o.i5)())}function c(e){return s(()=>(0,i.u)(e),[e])}function f(){let e=(0,u.useRouter)();return s(()=>{let t=(0,a.i)();if(null!=t)return t;throw setTimeout(()=>{e.replace("/setup/enter")},0),new Promise(()=>{})})}},5113:function(e,t,n){"use strict";function r(e){return function(e){let{sex:t,height:n,weight:r,birthday:a}=e,u=function(e){let t=new Date(e),n=new Date,r=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();return(a<0||0===a&&n.getDate()<t.getDate())&&r--,r}(a);return"man"===t?88.362+13.397*r+4.799*n-5.677*u:447.593+9.247*r+3.098*n-4.33*u}(e)*function(e){switch(e){case 1:return 1.2;case 2:return 1.375;case 3:return 1.55;case 4:return 1.725;case 5:return 1.9;default:throw Error("Invalid exercise load")}}(e.load)}n.d(t,{Rt:function(){return r}})},9825:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(5113),a=n(8930);async function u(e,t){let n=(0,r.Rt)(t),a=await i(e,t,"breakfast"),u=await i(e,t,"lunch"),o=await i(e,t,"dinner"),s=[];return a.forEach(e=>{u.forEach(n=>{o.forEach(r=>{if(e.name!==n.name&&e.name!==r.name&&n.name!==r.name){let a=e.energy+n.energy+r.energy,u=e.price+n.price+r.price;u<=t.price&&s.push({breakfast:e,lunch:n,dinner:r,totalCalories:a,totalPrice:u})}})})}),s.sort((e,t)=>Math.abs(e.totalCalories-n)-Math.abs(t.totalCalories-n)),s}async function i(e,t,n){let u=await Promise.all(t.stores.map(t=>(0,a.D)(e,t))).then(e=>e.flatMap(e=>e)),i=(0,r.Rt)(t),o="breakfast"===n?3*t.price/10:4*t.price/10,s="breakfast"===n?3*i/10:4*i/10;return u.filter(e=>{let n=.8*s<=e.energy&&e.energy<=1.1*s,r=!e.allergens.some(e=>t.allergens.includes(e)),a=e.price<=o;return n&&r&&a})}},8930:function(e,t,n){"use strict";async function r(e,t){try{let n;if("mockMenus"in globalThis)return globalThis.mockMenus.filter(n=>n.genre===e&&n.store.includes(t));if(!(n="matsuya"==t||"sevenEleven"==t?await fetch("/api/menus/".concat(t,".json")):await fetch("/api/menus.json?genre=".concat(e,"&store=").concat(t))).ok)throw Error("Error fetching menu info: ".concat(n.statusText));let r=await n.json();for(let e of r)null==e.store&&(e.store=[t]);return r.filter(t=>t.genre===e)}catch(e){throw console.error("Failed to retrieve menu information",e),e}}n.d(t,{D:function(){return r}})},2879:function(e,t,n){"use strict";n.d(t,{$S:function(){return a},BE:function(){return u},HY:function(){return r},NJ:function(){return i}});let r={bento:"弁当",noodles:"麺類",bread:"パン",rice:"米類",sweets:"スイーツ"},a={sevenEleven:"セブンイレブン",matsuya:"松屋"},u={walnut:"くるみ",egg:"卵",shrimps:"エビ",milk:"乳",wheat:"小麦",peanut:"ピーナッツ",crab:"カニ",soba:"そば"},i={breakfast:"朝食",lunch:"昼食",dinner:"夕食",sweets:"スイーツ"}},7200:function(e,t,n){"use strict";n.d(t,{A:function(){return a},i:function(){return u}});let r="userDatabase";function a(e){!function(e){if(e.height<=0)throw Error("身長は半角数字にしてください.");if(e.weight<=0)throw Error("体重は半角数字にしてください.");if(e.load<1||e.load>5)throw Error("運動量は1から5の半角数字にしてください.");if(!Array.isArray(e.stores)||0===e.stores.length)throw Error("飲食店を選択してください.");if(!Array.isArray(e.allergens))throw Error("アレルギーを選択してください.");if(e.price<0)throw Error("価格は半角数字にしてください.")}(e),localStorage.setItem(r,JSON.stringify(e))}function u(){return function(){let e=localStorage.getItem(r);return e?JSON.parse(e):null}()}},7549:function(e,t,n){"use strict";function r(){return a(new Date)}function a(e){return"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function u(e){let[t,n,r]=e.split("-").map(Number);return[t,n,r]}n.d(t,{RD:function(){return u},bW:function(){return a},i5:function(){return r}})},8260:function(e,t,n){"use strict";async function r(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e))}n.d(t,{v:function(){return r}})},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2446)}),_N_E=e.O()}]);