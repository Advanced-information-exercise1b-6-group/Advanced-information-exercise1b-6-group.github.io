(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{2446:function(e,t,r){Promise.resolve().then(r.bind(r,8426))},9645:function(e,t,r){"use strict";r.d(t,{P:function(){return o}});var n=r(7437),a=r(6463),i=r(2265);let u=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"戻る",onClick:e=>e.back()}],s=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"MyPage",onClick:e=>e.push("/mypage")}];function o(e){var t;let r=null!==(t=e.buttons)&&void 0!==t?t:e.isHome?s:u;return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,n.jsx)("main",{className:"flex flex-grow flex-shrink flex-col p-10 pt-14 overflow-y-scroll",children:(0,n.jsx)(i.Suspense,{children:e.children})}),0!=r.length&&(0,n.jsx)(l,{buttons:r,className:"flex-shrink-0"})]})}function l(e){let{className:t,buttons:r}=e,i=(0,a.useRouter)();return(0,n.jsx)("footer",{className:"w-full h-[20vw] bg-amber-600 flex flex-row ".concat(t),children:r.map(e=>{let{label:t,onClick:r}=e;return(0,n.jsx)("button",{className:"w-1 flex-grow h-full border-black border-2 border-l-0 first:border-l-2",onClick:()=>r(i),children:t},t)})})}},8426:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(7437),a=r(2265),i=r(6463),u=r(9645),s=r(2472),o=r(7549),l=r(4733),c=r(2879),f=r(3770),h=r(4887),d=r(8260);function m(){return(0,n.jsx)(u.P,{children:(0,n.jsx)(g,{})})}function g(){let e=(0,i.useRouter)(),t=(0,f.v$)(),[r,u]=(0,a.useState)("bento"),[m,g]=(0,a.useState)(!1),b=(0,a.useCallback)(async()=>{let n;(0,h.flushSync)(()=>g(!0)),await (0,d.v)();try{n=(await (0,l.y)(r,t))[0]}finally{g(!1)}if(null==n){alert("適切な組み合わせが見つかりませんでした");return}(0,s.J)((0,o.i5)(),"breakfast",[{...n.breakfast,ate:!1}],0),(0,s.J)((0,o.i5)(),"lunch",[{...n.lunch,ate:!1}],0),(0,s.J)((0,o.i5)(),"dinner",[{...n.dinner,ate:!1}],0),e.push("/menu/show")},[r,t,e]);return m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"text-xl",children:"メニュー検索"}),(0,n.jsx)("hr",{className:"border-amber-700"}),(0,n.jsx)("p",{children:"検索中..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"text-xl",children:"メニュー検索"}),(0,n.jsx)("hr",{className:"border-amber-700"}),(0,n.jsx)("p",{children:"今日食べたいジャンルを選択してください"}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)("select",{value:r,onChange:e=>u(e.target.value),className:"border-2 border-black w-60",children:Object.entries(c.HY).map(e=>{let[t,r]=e;return(0,n.jsx)("option",{value:t,children:r},t)})})}),(0,n.jsx)("div",{className:"text-right mt-10",children:(0,n.jsx)("button",{disabled:!r,onClick:b,className:"border-2 border-black w-40",children:"商品を探す"})})]})}},7858:function(e,t,r){"use strict";function n(e){return JSON.parse(localStorage.getItem("eatenData")||"[]").filter(t=>t.date===e)}r.d(t,{u:function(){return n}})},2472:function(e,t,r){"use strict";function n(e,t,r,n){let a=JSON.parse(localStorage.getItem("eatenData")||"[]"),i=a.findIndex(r=>r.date===e&&r.mealKind===t);-1!==i&&a.splice(i,1),a.push({date:e,mealKind:t,additionalEnergy:n,menu:r});let u=JSON.stringify(a);return localStorage.setItem("eatenData",u),!0}r.d(t,{J:function(){return n}})},3770:function(e,t,r){"use strict";r.d(t,{Hb:function(){return c},uN:function(){return l},v$:function(){return f}});var n=r(2265),a=r(7200),i=r(6463);r(5592);var u=r(7858),s=r(7549);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[r,a]=(0,n.useState)();if(void 0!==r&&t.length==r.dependencies.length&&t.every((e,t)=>Object.is(e,r.dependencies[t])))return r.value;let i=e();return a({value:i,dependencies:t}),i}function l(){return c((0,s.i5)())}function c(e){return o(()=>(0,u.u)(e),[e])}function f(){let e=(0,i.useRouter)();return o(()=>{let t=(0,a.i)();if(null!=t)return t;throw setTimeout(()=>{e.replace("/setup/enter")},0),new Promise(()=>{})})}},5113:function(e,t,r){"use strict";function n(e){return function(e){let{sex:t,height:r,weight:n,birthday:a}=e,i=function(e){let t=new Date(e),r=new Date,n=r.getFullYear()-t.getFullYear(),a=r.getMonth()-t.getMonth();return(a<0||0===a&&r.getDate()<t.getDate())&&n--,n}(a);return"man"===t?88.362+13.397*n+4.799*r-5.677*i:447.593+9.247*n+3.098*r-4.33*i}(e)*function(e){switch(e){case 1:return 1.2;case 2:return 1.375;case 3:return 1.55;case 4:return 1.725;case 5:return 1.9;default:throw Error("Invalid exercise load")}}(e.load)}r.d(t,{Rt:function(){return n}})},4733:function(e,t,r){"use strict";r.d(t,{y:function(){return i}});var n=r(5113);async function a(e,t){try{let r;if("mockMenus"in globalThis)return globalThis.mockMenus;if(!(r="matsuya"==t||"sevenEleven"==t?await fetch("/api/menus/".concat(t,".json")):await fetch("/api/menus.json?genre=".concat(e,"&store=").concat(t))).ok)throw Error("Error fetching menu info: ".concat(r.statusText));let n=await r.json();for(let e of n)null==e.store&&(e.store=[t]);return n}catch(e){throw console.error("Failed to retrieve menu information",e),e}}async function i(e,t){let r=(0,n.Rt)(t),a=await u(e,t,"breakfast"),i=await u(e,t,"lunch"),s=await u(e,t,"dinner"),o=[];return a.forEach(e=>{i.forEach(r=>{s.forEach(n=>{if(e.name!==r.name&&e.name!==n.name&&r.name!==n.name){let a=e.energy+r.energy+n.energy,i=e.price+r.price+n.price;i<=t.price&&o.push({breakfast:e,lunch:r,dinner:n,totalCalories:a,totalPrice:i})}})})}),o.sort((e,t)=>Math.abs(e.totalCalories-r)-Math.abs(t.totalCalories-r)),o}async function u(e,t,r){let i=await Promise.all(t.stores.map(t=>a(e,t))).then(e=>e.flatMap(e=>e)),u=(0,n.Rt)(t),s="breakfast"===r?3*t.price/10:4*t.price/10,o="breakfast"===r?3*u/10:4*u/10;return i.filter(r=>{let n=r.genre.includes(e),a=.8*o<=r.energy&&r.energy<=1.1*o,i=!r.allergens.some(e=>t.allergens.includes(e)),u=r.price<=s,l=r.store.some(e=>t.stores.includes(e));return n&&a&&i&&u&&l})}},2879:function(e,t,r){"use strict";r.d(t,{$S:function(){return a},BE:function(){return i},HY:function(){return n}});let n={chinese:"中華",bento:"弁当",curry:"カレー",bread:"パン",rice:"米類",sweets:"スイーツ"},a={sevenEleven:"セブンイレブン",familyMart:"ファミリーマート",lawson:"ローソン",matsuya:"松屋"},i={walnut:"くるみ",egg:"卵",shrimps:"エビ",milk:"乳",wheat:"小麦",peanut:"ピーナッツ",crab:"カニ",soba:"そば"}},7200:function(e,t,r){"use strict";r.d(t,{A:function(){return a},i:function(){return i}});let n="userDatabase";function a(e){!function(e){if(e.height<=0)throw Error("身長は半角数字にしてください.");if(e.weight<=0)throw Error("体重は半角数字にしてください.");if(e.load<1||e.load>5)throw Error("運動量は1から5の半角数字にしてください.");if(!Array.isArray(e.stores)||0===e.stores.length)throw Error("飲食店を選択してください.");if(!Array.isArray(e.allergens))throw Error("アレルギーを選択してください.");if(e.price<0)throw Error("価格は半角数字にしてください.")}(e),localStorage.setItem(n,JSON.stringify(e))}function i(){return function(){let e=localStorage.getItem(n);return e?JSON.parse(e):null}()}},7549:function(e,t,r){"use strict";function n(){return a(new Date)}function a(e){return"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function i(e){let[t,r,n]=e.split("-").map(Number);return[t,r,n]}r.d(t,{RD:function(){return i},bW:function(){return a},i5:function(){return n}})},8260:function(e,t,r){"use strict";async function n(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e))}r.d(t,{v:function(){return n}})},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2446)}),_N_E=e.O()}]);