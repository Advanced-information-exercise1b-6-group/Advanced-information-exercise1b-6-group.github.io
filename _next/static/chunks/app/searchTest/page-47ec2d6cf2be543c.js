(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{4919:function(e,r,n){Promise.resolve().then(n.bind(n,4948))},9645:function(e,r,n){"use strict";n.d(r,{P:function(){return i}});var t=n(7437),l=n(6463),a=n(2265);let s=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"戻る",onClick:e=>e.back()}],o=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"MyPage",onClick:e=>e.push("/mypage")}];function i(e){var r;let n=null!==(r=e.buttons)&&void 0!==r?r:e.isHome?o:s;return(0,t.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,t.jsx)("main",{className:"flex flex-grow flex-shrink flex-col p-10 pt-14 overflow-y-scroll",children:(0,t.jsx)(a.Suspense,{children:e.children})}),0!=n.length&&(0,t.jsx)(c,{buttons:n,className:"flex-shrink-0"})]})}function c(e){let{className:r,buttons:n}=e,a=(0,l.useRouter)();return(0,t.jsx)("footer",{className:"w-full h-[20vw] bg-amber-600 flex flex-row ".concat(r),children:n.map(e=>{let{label:r,onClick:n}=e;return(0,t.jsx)("button",{className:"w-1 flex-grow h-full border-black border-2 border-l-0 first:border-l-2",onClick:()=>n(a),children:r},r)})})}},4948:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return i}});var t=n(7437),l=n(2265),a=n(9645),s=n(4733),o=n(5113);function i(){return(0,t.jsx)(a.P,{children:(0,t.jsx)(c,{})})}function c(){let[e,r]=(0,l.useState)([{breakfast:void 0,lunch:void 0,dinner:void 0,totalCalories:void 0,totalPrice:void 0}]),n="chinese",a=(0,l.useMemo)(()=>({sex:"man",height:180,weight:75,load:3,birthday:"1990-01-01",stores:["familyMart","lawson"],allergens:["milk"],price:7e3}),[]);return(0,l.useEffect)(()=>{(async()=>{let e=await (0,s.y)(n,a);console.log("Search Results:",e),r(e)})()},[n,a]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"container mx-auto",children:[(0,t.jsx)("p",{}),(0,t.jsxs)("ul",{children:[e.map((e,r)=>{var n,l,a;return(0,t.jsxs)("li",{children:[(0,t.jsxs)("p",{children:["Breakfast: ",(null===(n=e.breakfast)||void 0===n?void 0:n.name)||"データなし"]}),(0,t.jsxs)("p",{children:["Lunch: ",(null===(l=e.lunch)||void 0===l?void 0:l.name)||"データなし"]}),(0,t.jsxs)("p",{children:["Dinner: ",(null===(a=e.dinner)||void 0===a?void 0:a.name)||"データなし"]}),(0,t.jsxs)("p",{children:["Total Calories: ",e.totalCalories||0]}),(0,t.jsxs)("p",{children:["Total Price: ",e.totalPrice||0]}),(0,t.jsx)("hr",{className:"border-amber-700 mb-2"})]},r)}),(0,t.jsxs)("p",{children:["1日の摂取カロリー",(0,o.Rt)(a)]})]})]})})}},5113:function(e,r,n){"use strict";function t(e){return function(e){let{sex:r,height:n,weight:t,birthday:l}=e,a=function(e){let r=new Date(e),n=new Date,t=n.getFullYear()-r.getFullYear(),l=n.getMonth()-r.getMonth();return(l<0||0===l&&n.getDate()<r.getDate())&&t--,t}(l);return"man"===r?88.362+13.397*t+4.799*n-5.677*a:447.593+9.247*t+3.098*n-4.33*a}(e)*function(e){switch(e){case 1:return 1.2;case 2:return 1.375;case 3:return 1.55;case 4:return 1.725;case 5:return 1.9;default:throw Error("Invalid exercise load")}}(e.load)}n.d(r,{Rt:function(){return t}})},4733:function(e,r,n){"use strict";n.d(r,{y:function(){return a}});var t=n(5113);async function l(e,r){try{if("mockMenus"in globalThis)return globalThis.mockMenus;let n=await fetch("/api/menus.json?genre=".concat(e,"&store=").concat(r));if(!n.ok)throw Error("Error fetching menu info: ".concat(n.statusText));return await n.json()}catch(e){throw console.error("Failed to retrieve menu information",e),e}}async function a(e,r){let n=(0,t.Rt)(r),l=await s(e,r,"breakfast"),a=await s(e,r,"lunch"),o=await s(e,r,"dinner"),i=[];return l.forEach(e=>{a.forEach(t=>{o.forEach(l=>{if(e.name!==t.name&&e.name!==l.name&&t.name!==l.name){let a=e.energy+t.energy+l.energy,s=e.price+t.price+l.price;a<=n&&s<=r.price&&i.push({breakfast:e,lunch:t,dinner:l,totalCalories:a,totalPrice:s})}})})}),i.sort((e,r)=>r.totalCalories-e.totalCalories),i}async function s(e,r,n){let a=await Promise.all(r.stores.map(r=>l(e,r))).then(e=>e.flatMap(e=>e)),s=(0,t.Rt)(r);return a.filter(t=>{let l=t.genle.includes(e),a="breakfast"===n?t.energy<=3*s/10:"lunch"===n?t.energy<=4*s/10:t.energy<=3*s/10,o=!t.allergens.some(e=>r.allergens.includes(e)),i="breakfast"===n?t.price<=3*r.price/10:t.price<=4*r.price/10,c=t.store.some(e=>r.stores.includes(e));return l&&a&&o&&i&&c})}},6463:function(e,r,n){"use strict";var t=n(1169);n.o(t,"useRouter")&&n.d(r,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(r,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4919)}),_N_E=e.O()}]);