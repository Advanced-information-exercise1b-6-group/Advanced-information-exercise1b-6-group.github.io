(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{4919:function(e,n,r){Promise.resolve().then(r.bind(r,4948))},9645:function(e,n,r){"use strict";r.d(n,{P:function(){return i}});var t=r(7437),a=r(6463),l=r(2265);let s=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"戻る",onClick:e=>e.back()}],o=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"MyPage",onClick:e=>e.push("/mypage")}];function i(e){var n;let r=null!==(n=e.buttons)&&void 0!==n?n:e.isHome?o:s;return(0,t.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,t.jsx)("main",{className:"flex flex-grow flex-shrink flex-col p-10 pt-14 overflow-y-scroll",children:(0,t.jsx)(l.Suspense,{children:e.children})}),0!=r.length&&(0,t.jsx)(c,{buttons:r,className:"flex-shrink-0"})]})}function c(e){let{className:n,buttons:r}=e,l=(0,a.useRouter)();return(0,t.jsx)("footer",{className:"w-full h-[20vw] bg-amber-600 flex flex-row ".concat(n),children:r.map(e=>{let{label:n,onClick:r}=e;return(0,t.jsx)("button",{className:"w-1 flex-grow h-full border-black border-2 border-l-0 first:border-l-2",onClick:()=>r(l),children:n},n)})})}},4948:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return i}});var t=r(7437),a=r(2265),l=r(9645),s=r(4733),o=r(5113);function i(){return(0,t.jsx)(l.P,{children:(0,t.jsx)(c,{})})}function c(){let[e,n]=(0,a.useState)([{breakfast:void 0,lunch:void 0,dinner:void 0,totalCalories:void 0,totalPrice:void 0}]),r="chinese",l=(0,a.useMemo)(()=>({sex:"man",height:180,weight:75,load:3,birthday:"1990-01-01",stores:["familyMart","lawson"],allergens:["milk"],price:7e3}),[]);return(0,a.useEffect)(()=>{(async()=>{let e=await (0,s.y)(r,l);console.log("Search Results:",e),n(e)})()},[r,l]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"container mx-auto",children:[(0,t.jsx)("p",{}),(0,t.jsxs)("ul",{children:[e.map((e,n)=>{var r,a,l;return(0,t.jsxs)("li",{children:[(0,t.jsxs)("p",{children:["Breakfast: ",(null===(r=e.breakfast)||void 0===r?void 0:r.name)||"データなし"]}),(0,t.jsxs)("p",{children:["Lunch: ",(null===(a=e.lunch)||void 0===a?void 0:a.name)||"データなし"]}),(0,t.jsxs)("p",{children:["Dinner: ",(null===(l=e.dinner)||void 0===l?void 0:l.name)||"データなし"]}),(0,t.jsxs)("p",{children:["Total Calories: ",e.totalCalories||0]}),(0,t.jsxs)("p",{children:["Total Price: ",e.totalPrice||0]}),(0,t.jsx)("hr",{className:"border-amber-700 mb-2"})]},n)}),(0,t.jsxs)("p",{children:["1日の摂取カロリー",(0,o.Rt)(l)]})]})]})})}},5113:function(e,n,r){"use strict";function t(e){return function(e){let{sex:n,height:r,weight:t,birthday:a}=e,l=function(e){let n=new Date(e),r=new Date,t=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return(a<0||0===a&&r.getDate()<n.getDate())&&t--,t}(a);return"man"===n?88.362+13.397*t+4.799*r-5.677*l:447.593+9.247*t+3.098*r-4.33*l}(e)*function(e){switch(e){case 1:return 1.2;case 2:return 1.375;case 3:return 1.55;case 4:return 1.725;case 5:return 1.9;default:throw Error("Invalid exercise load")}}(e.load)}r.d(n,{Rt:function(){return t}})},4733:function(e,n,r){"use strict";r.d(n,{y:function(){return l}});var t=r(5113);async function a(e,n){try{let r;if("mockMenus"in globalThis)return globalThis.mockMenus;if(!(r="matsuya"==n||"sevenEleven"==n?await fetch("/api/menus/".concat(n,".json")):await fetch("/api/menus.json?genre=".concat(e,"&store=").concat(n))).ok)throw Error("Error fetching menu info: ".concat(r.statusText));let t=await r.json();for(let e of t)null==e.store&&(e.store=[n]);return t}catch(e){throw console.error("Failed to retrieve menu information",e),e}}async function l(e,n){let r=(0,t.Rt)(n),a=await s(e,n,"breakfast"),l=await s(e,n,"lunch"),o=await s(e,n,"dinner"),i=[];return a.forEach(e=>{l.forEach(r=>{o.forEach(t=>{if(e.name!==r.name&&e.name!==t.name&&r.name!==t.name){let a=e.energy+r.energy+t.energy,l=e.price+r.price+t.price;l<=n.price&&i.push({breakfast:e,lunch:r,dinner:t,totalCalories:a,totalPrice:l})}})})}),i.sort((e,n)=>Math.abs(e.totalCalories-r)-Math.abs(n.totalCalories-r)),i}async function s(e,n,r){let l=await Promise.all(n.stores.map(n=>a(e,n))).then(e=>e.flatMap(e=>e)),s=(0,t.Rt)(n),o="breakfast"===r?3*n.price/10:4*n.price/10,i="breakfast"===r?3*s/10:4*s/10;return l.filter(r=>{let t=r.genre.includes(e),a=.8*i<=r.energy&&r.energy<=1.1*i,l=!r.allergens.some(e=>n.allergens.includes(e)),s=r.price<=o,c=r.store.some(e=>n.stores.includes(e));return t&&a&&l&&s&&c})}},6463:function(e,n,r){"use strict";var t=r(1169);r.o(t,"useRouter")&&r.d(n,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(n,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4919)}),_N_E=e.O()}]);