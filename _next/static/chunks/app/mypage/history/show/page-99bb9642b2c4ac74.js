(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{5581:function(e,t,n){Promise.resolve().then(n.bind(n,2393))},9645:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(7437),l=n(6463),u=n(2265);let a=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"戻る",onClick:e=>e.back()}],s=[{label:"メニュー検索",onClick:e=>e.push("/menu/select-genre")},{label:"Home",onClick:e=>e.push("/home")},{label:"MyPage",onClick:e=>e.push("/mypage")}];function i(e){var t;let n=null!==(t=e.buttons)&&void 0!==t?t:e.isHome?s:a;return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,r.jsx)("main",{className:"flex flex-grow flex-shrink flex-col p-10 pt-14 overflow-y-scroll",children:(0,r.jsx)(u.Suspense,{children:e.children})}),0!=n.length&&(0,r.jsx)(c,{buttons:n,className:"flex-shrink-0"})]})}function c(e){let{className:t,buttons:n}=e,u=(0,l.useRouter)();return(0,r.jsx)("footer",{className:"w-full h-[20vw] bg-amber-600 flex flex-row ".concat(t),children:n.map(e=>{let{label:t,onClick:n}=e;return(0,r.jsx)("button",{className:"w-1 flex-grow h-full border-black border-2 border-l-0 first:border-l-2",onClick:()=>n(u),children:t},t)})})}},2393:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),l=n(2265),u=n(9645),a=n(3770),s=n(6463),i=n(2472),c=n(8585);function o(){return(0,r.jsx)(u.P,{children:(0,r.jsx)(f,{})})}function f(){let e=(0,s.useSearchParams)(),t=e.get("date"),n=e.get("when"),u=(0,a.Hb)(t),o=(0,l.useMemo)(()=>{var e;return null!==(e=u.find(e=>e.mealKind===n))&&void 0!==e?e:{menu:[],mealKind:n,date:t,additionalEnergy:0}},[u,t,n]),f=(0,s.useRouter)(),[d,h]=(0,l.useState)(()=>o.menu.filter(e=>e.ate)),[m,x]=(0,l.useState)(""),[b,g]=(0,l.useState)(o.additionalEnergy);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"食事記録"}),(0,r.jsx)("hr",{className:"border-amber-700"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"今日のおすすめメニュー"}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:"おすすめメニューを食べた場合はチェックしてください"}),(0,r.jsx)("ul",{children:o.menu.map(e=>(0,r.jsx)("li",{className:"mb-2",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)(c.y,{thisValue:e,value:d,setValue:h,className:"mr-2"}),e.name]})},e.name))}),(0,r.jsx)("p",{children:"おすすめメニュー以外に食べたもののエネルギー量を入力してください"}),(0,r.jsx)(c.Y,{value:b,setValue:g}),(0,r.jsx)("span",{className:"ml-2",children:"kal"}),(0,r.jsx)("button",{onClick:()=>{x("メニューを選択しました");let e=o.menu.map(e=>({...e,ate:d.includes(e)}));(0,i.J)(t,n,e,null!=b?b:0),f.back()},className:"bg-blue-500 text-white px-4 py-2 mt-4 rounded-md hover:bg-blue-600",children:"確定"}),m&&(0,r.jsx)("p",{className:"mt-2 text-green-600",children:m})]})})}},7858:function(e,t,n){"use strict";function r(e){return JSON.parse(localStorage.getItem("eatenData")||"[]").filter(t=>t.date===e)}n.d(t,{u:function(){return r}})},2472:function(e,t,n){"use strict";function r(e,t,n,r){let l=JSON.parse(localStorage.getItem("eatenData")||"[]"),u=l.findIndex(n=>n.date===e&&n.mealKind===t);-1!==u&&l.splice(u,1),l.push({date:e,mealKind:t,additionalEnergy:r,menu:n});let a=JSON.stringify(l);return localStorage.setItem("eatenData",a),!0}n.d(t,{J:function(){return r}})},8585:function(e,t,n){"use strict";n.d(t,{Y:function(){return u},y:function(){return a}});var r=n(7437),l=n(2265);function u(e){let{value:t,setValue:n,...u}=e,[a,s]=(0,l.useState)("");(0,l.useEffect)(()=>{null!=t&&s(String(t))},[t]),(0,l.useEffect)(()=>{if(""==a)n(null);else{let e=parseInt(a);isNaN(e)||n(e)}},[a,n]);let i=(0,l.useCallback)(e=>{s([...e.target.value].filter(e=>null!=e.match(/[0-9]/)).join(""))},[]);return(0,r.jsx)("input",{...u,value:a,pattern:"[0-9]+",inputMode:"numeric",onChange:i})}function a(e){let{thisValue:t,value:n,setValue:l,...u}=e;return(0,r.jsx)("input",{...u,type:"checkbox",checked:n.includes(t),onChange:e=>{e.target.checked?l(e=>[...new Set([...e,t])]):l(e=>e.filter(e=>e!=t))}})}},3770:function(e,t,n){"use strict";n.d(t,{Hb:function(){return o},uN:function(){return c},v$:function(){return f}});var r=n(2265),l=n(7200),u=n(6463);n(5592);var a=n(7858),s=n(7549);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,l]=(0,r.useState)();if(void 0!==n&&t.length==n.dependencies.length&&t.every((e,t)=>Object.is(e,n.dependencies[t])))return n.value;let u=e();return l({value:u,dependencies:t}),u}function c(){return o((0,s.i5)())}function o(e){return i(()=>(0,a.u)(e),[e])}function f(){let e=(0,u.useRouter)();return i(()=>{let t=(0,l.i)();if(null!=t)return t;throw setTimeout(()=>{e.replace("/setup/enter")},0),new Promise(()=>{})})}},7200:function(e,t,n){"use strict";n.d(t,{A:function(){return l},i:function(){return u}});let r="userDatabase";function l(e){!function(e){if(e.height<=0)throw Error("身長は半角数字にしてください.");if(e.weight<=0)throw Error("体重は半角数字にしてください.");if(e.load<1||e.load>5)throw Error("運動量は1から5の半角数字にしてください.");if(!Array.isArray(e.stores)||0===e.stores.length)throw Error("飲食店を選択してください.");if(!Array.isArray(e.allergens))throw Error("アレルギーを選択してください.");if(e.price<0)throw Error("価格は半角数字にしてください.")}(e),localStorage.setItem(r,JSON.stringify(e))}function u(){return function(){let e=localStorage.getItem(r);return e?JSON.parse(e):null}()}},7549:function(e,t,n){"use strict";function r(){return l(new Date)}function l(e){return"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function u(e){let[t,n,r]=e.split("-").map(Number);return[t,n,r]}n.d(t,{RD:function(){return u},bW:function(){return l},i5:function(){return r}})},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5581)}),_N_E=e.O()}]);